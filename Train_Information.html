<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy, limit } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

// ðŸ”´ PASTE YOUR FIREBASE CONFIG HERE
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "XXXX",
  appId: "XXXX"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const body = document.getElementById("dataBody");

// Get latest 29 records from Firestore
const q = query(
  collection(db, "maintenanceData"),
  orderBy("createdAt", "desc"),
  limit(29)
);

const querySnapshot = await getDocs(q);

let sr = 1;

querySnapshot.forEach((doc) => {
  const e = doc.data();

  const row = document.createElement("tr");
  row.innerHTML = `
    <td>${sr++}</td>
    <td>${e.trainSet || ""}</td>
    <td>${e.location || ""}</td>
    <td>${e.date || ""}</td>
    <td>${e.startTime || ""}</td>
    <td>${e.endTime || ""}</td>
    <td>${e.work || ""}</td>
  `;
  body.appendChild(row);
});
</script>
